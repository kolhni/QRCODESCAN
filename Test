<!DOCTYPE html>
<html>
<head>
    <title>BLE Tag Interaktion</title>
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
    <script src="https://cdn.rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>
</head>
<body>
    <h1>BLE Tag Interaktion</h1>
    <div id="cameraContainer">
        <video id="preview"></video>
    </div>
    <button onclick="scanQRCode()">QR Code scannen</button>
    <div id="qrcode"></div>
    <button onclick="searchAndConnect()">Nach BLE Tags suchen</button>
    <button onclick="uploadFile()">Datei auf BLE Tag laden</button>
    
    <div id="deviceList"></div>

    <script>
        let selectedDevice = null;
        let qrcodeScanner = null;

        function scanQRCode() {
            const cameraContainer = document.getElementById("cameraContainer");
            cameraContainer.style.display = "block";

            const qrcodeDiv = document.getElementById("qrcode");
            qrcodeDiv.innerHTML = "";
            const qrcode = new QRCode(qrcodeDiv, {
                width: 128,
                height: 128
            });

            qrcodeScanner = new Instascan.Scanner({ video: document.getElementById('preview') });
            qrcodeScanner.addListener('scan', function(content) {
                qrcode.makeCode(content);
                qrcodeScanner.stop();
                cameraContainer.style.display = "none";
            });
            Instascan.Camera.getCameras().then(function (cameras) {
                if (cameras.length > 0) {
                    qrcodeScanner.start(cameras[0]);
                } else {
                    console.error('Keine Kamera gefunden');
                }
            });
        }

        function searchAndConnect() {
            // Hier den Code für die BLE-Suche und Verbindung einfügen
        }

        function uploadFile() {
            // Hier den Code für die Dateiübertragung auf das BLE-Gerät einfügen
        }
    </script>
</body>
</html>
